<link rel="import" href="elements.html">
<link rel="import" href="socobo-inventory-create.html">
<link rel="import" href="socobo-inventory-overview.html">

<dom-module id="socobo-inventory">
  <style>
    :host {
      display: block;
    }

    .button-add {
      position: absolute;
      right: 30px;
      bottom: 30px;
      --paper-fab-background: var(--accent-color);
    }
  </style>

  <template>
    <socobo-inventory-create id="inventoryCreateDialog">
    </socobo-inventory-create>
    <firebase-collection
      order-by-child="created"
      location="{{location}}"
      data="{{data}}"></firebase-collection>
    <socobo-inventory-overview data="[[data]]"></socobo-inventory-overview>
    <paper-fab id="inventory-button-add" class="button-add" icon="add" on-click="createItem"></paper-fab>
  </template>

</dom-module>

<script>
  (function () {
    Polymer({
      is: 'socobo-inventory',

      properties: {
		    
        /*Object containing the user information. Must have following 
        properties: 
          - userId, 
          - firebaseUrl,
          - expires
        */
        userLogin: {
			   type: Object
         },
        
        /*Specifies the location of the Firebase database 
        */
        location: {
          computed: "_handleLogin(userLogin)",
          type: String,
          value: "https://socobo.firebaseio.com/"
        }
	   },
      
     /*Construct firebase url for user's inventory from userLogin object</br>
     @param {Object} login
     @method _handleLogin
     */
     _handleLogin: function(login) {
       return login.firebaseUrl + "inventory/" + login.userId;
     },

     /*Display dialog to create new inventory items
     */
     _createItem: function () {
       this.$.inventoryCreateDialog.style.display = "block";
       this.$.inventoryCreateDialog.show(this.userLogin);
     }
    });
  })();
</script>
